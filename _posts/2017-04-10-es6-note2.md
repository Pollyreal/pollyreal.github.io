---
date: 2017-04-11 21:51:31+00:00
layout: post
title: ECMAScript 6 学习笔记2
categories: 文档
tags: 笔记
---

[TOC]
# ECMAScript 6 学习笔记2
## 字符串的扩展
### Unicode表示：将码点放入大括号
  ```javascript
    "\u{20BB7}"
    // "𠮷"
    
    "\u{41}\u{42}\u{43}"
    // "ABC"
    
    let hello = 123;
    hell\u{6F} // 123
    
    '\u{1F680}' === '\uD83D\uDE80'
    // true
  ```
### codePointAt()
### String.fromCodePoint()
### 遍历器接口
```javascript
for (let codePoint of 'foo') {
  console.log(codePoint)
}
```
### at()
### normalize():Unicode正规化
### includes(),startsWith(),endsWith():返回布尔值
### repeat()
### padStart()用于头部补全，padEnd()用于尾部补全
### 模板字符串
  ```javascript
  $('#result').append(`
  There are <b>${basket.count}</b> items
   in your basket, <em>${basket.onSale}</em>
  are on sale!
`);
  ```
 - 反引号标识
 - 模板字符串中嵌入变量，需要将变量名写在${}之中
 - 模板字符串之中还能调用函数。
 ### 实例：模板编译
```javascript
var template = `
<ul>
  <% for(var i=0; i < data.supplies.length; i++) { %>
    <li><%= data.supplies[i] %></li>
  <% } %>
</ul>
`;
```
上面代码在模板字符串之中，放置了一个常规模板。该模板使用<%...%>放置JavaScript代码，使用<%= ... %>输出JavaScript表达式。
### 标签模板
### String.raw
## 函数的扩展
### lambda表达式
```javascript
var f = v => v;
// 等同于
var f = function(v) {
  return v;
};
var f = () => 5;
// 等同于
var f = function () { return 5 };

var sum = (num1, num2) => num1 + num2;
// 等同于
var sum = function(num1, num2) {
  return num1 + num2;
};
```
### 尾调用
指某个函数的最后一步是调用另一个函数
```javascript
function f(x){
  return g(x);
}
```
### 尾递归
但对于尾递归来说，由于只存在一个调用帧，所以永远不会发生“栈溢出”错误。  

如果是非尾递归的fibonacci 递归方法
```javascript
function Fibonacci (n) {
  if ( n <= 1 ) {return 1};

  return Fibonacci(n - 1) + Fibonacci(n - 2);
}

Fibonacci(10); // 89
// Fibonacci(100)
// Fibonacci(500)
// 堆栈溢出了
```
如果我们使用尾递归优化过的fibonacci 递归算法

```javascript
function Fibonacci2 (n , ac1 = 1 , ac2 = 1) {
  if( n <= 1 ) {return ac2};

  return Fibonacci2 (n - 1, ac2, ac1 + ac2);
}

Fibonacci2(100) // 573147844013817200000
Fibonacci2(1000) // 7.0330367711422765e+208
Fibonacci2(10000) // Infinity
```
## 对象的扩展
### 属性简写，方法也可以简写
如果某个方法的值是一个Generator函数，前面需要加上星号。
```javascript
var obj = {
  * m(){
    yield 'hello world';
  }
};
```
### 实例：Singleton模式
Singleton模式指的是调用一个类，任何时候返回的都是同一个实例。
## Set和Map
### Set去重
- Map数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。
- Object结构提供了“字符串—值”的对应，Map结构提供了“值—值”的对应，是一种更完善的Hash结构实现。

### 遍历方法
- keys()：返回键名的遍历器。
- values()：返回键值的遍历器。
- entries()：返回所有成员的遍历器。
- forEach()：遍历Map的所有成员。

## Promise对象
Promise 是异步编程的一种解决方案

## Module的语法
跨模块常量
```javascript
// constants.js 模块
export const A = 1;
export const B = 3;
export const C = 4;

// test1.js 模块
import * as constants from './constants';
console.log(constants.A); // 1
console.log(constants.B); // 3

// test2.js 模块
import {A, B} from './constants';
console.log(A); // 1
console.log(B); // 3
```